(this.webpackJsonpcotd=this.webpackJsonpcotd||[]).push([[0],{55:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(3),s=a.n(n),r=a(22),i=a(35),c=a(9),o=a(19),l=a(12),u=a(13),h=a(15),d=a(14),j=a(2),b=function(e){var t=e.tagline;return Object(j.jsxs)("header",{className:"top",children:[Object(j.jsxs)("h1",{children:["Catch",Object(j.jsxs)("span",{className:"ofThe",children:[Object(j.jsx)("span",{className:"of",children:"Of"}),Object(j.jsx)("span",{className:"the",children:"The"})]}),"Day"]}),Object(j.jsx)("h3",{className:"tagline",children:Object(j.jsx)("span",{children:t})})]})};function f(e){return(e/100).toLocaleString("en-US",{style:"currency",currency:"USD"})}function p(e){return e[Math.floor(Math.random()*e.length)]}function m(){var e=["adorable","beautiful","clean","drab","elegant","fancy","gullible","hilarious","long","magnificent","old-fashioned","plain","quaint","sparkling","ugly","unsightly","angry","bewildered","clumsy","defeated","embarrassed","fierce","grumpy","helpless","itchy","jealous","lazy","mysterious","nervous","obnoxious","panicky","regretful","scary","thoughtless","uptight","worried"];return"".concat(p(e),"-").concat(p(e),"-").concat(p(["anchovies","anglerfish","barracudas","blobfish","catfish","carps","cods","dragonfish","eels","flounders","guppies","haddocks","herrings","jellyfish","krills","lionfish","megalodons","oysters","piranhas","pufferfish","salmons","sardines","seahorses","sharks","starfish","stingrays","tunas"]))}var O=a(58),v=a(59),g=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).renderOrderListItem=function(e){var t=n.props,a=t.fishMenu,s=t.order,r=t.deleteOrderFish;if(0===Object.keys(a).length)return null;var i=a[e],c=s[e],l=i&&i.isAvailable,u={classNames:"order",key:e,timeout:{enter:250,exit:250}};return l?Object(j.jsx)(O.a,Object(o.a)(Object(o.a)({},u),{},{children:Object(j.jsxs)("li",{children:[Object(j.jsxs)("span",{children:[Object(j.jsx)(v.a,{component:"span",className:"count",children:Object(j.jsx)(O.a,{classNames:"count",timeout:{enter:250,exit:250},children:Object(j.jsx)("span",{children:c})},c)}),"lbs ",i.name]}),f(c*i.price),Object(j.jsx)("button",{onClick:function(){return r(e)},children:"\xd7"})]},e)})):Object(j.jsx)(O.a,Object(o.a)(Object(o.a)({},u),{},{children:Object(j.jsxs)("li",{children:["Sorry, ",i?i.name:"fish"," is no longer available!",Object(j.jsx)("button",{onClick:function(){return r(e)},children:"\xd7"})]},e)}))},n.state={},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.fishMenu,a=e.order,n=Object.keys(a),s=n.reduce((function(e,n){var s=t[n],r=a[n];return s&&s.isAvailable?e+r*s.price:e}),0);return Object(j.jsxs)("div",{className:"order-wrap",children:[Object(j.jsx)("h2",{children:"Order"}),0===Object.keys(t).length?null:Object(j.jsx)(v.a,{component:"ul",className:"order",children:n.map(this.renderOrderListItem)}),Object(j.jsxs)("div",{className:"total",children:["Total:",Object(j.jsx)("strong",{children:f(s)})]})]})}}]),a}(s.a.Component),x=a(25),y=a.n(x),k=a(30),S=a(27),w=a(24),F=a(34),A=a.n(F),C=w.a.initializeApp({apiKey:"AIzaSyBED8Pk7YVzcGdFWO8NHAr-l2ANDXvc168",authDomain:"catch-of-the-day-by-filip.firebaseapp.com",databaseURL:"https://catch-of-the-day-by-filip-default-rtdb.europe-west1.firebasedatabase.app"}),N=A.a.createClass(C.database()),R=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).nameRef=s.a.createRef(),n.priceRef=s.a.createRef(),n.isAvailableRef=s.a.createRef(),n.descRef=s.a.createRef(),n.imageRef=s.a.createRef(),n.createFish=function(e){e.preventDefault();var t={name:n.nameRef.current.value,price:parseFloat(n.priceRef.current.value),isAvailable:"available"===n.isAvailableRef.current.value,desc:n.descRef.current.value,image:n.imageRef.current.value};n.props.addFish(t),e.currentTarget.reset()},n.state={},n}return Object(u.a)(a,[{key:"render",value:function(){return Object(j.jsxs)("form",{className:"fish-edit",onSubmit:this.createFish,children:[Object(j.jsx)("input",{name:"name",type:"text",placeholder:"Name",ref:this.nameRef,required:!0}),Object(j.jsx)("input",{name:"price",type:"number",placeholder:"Price",ref:this.priceRef,required:!0}),Object(j.jsxs)("select",{name:"isAvailable",ref:this.isAvailableRef,required:!0,children:[Object(j.jsx)("option",{value:"available",children:"Fresh!"}),Object(j.jsx)("option",{value:"unavailable",children:"Sold Out!"})]}),Object(j.jsx)("textarea",{name:"desc",placeholder:"Description",ref:this.descRef,required:!0}),Object(j.jsx)("input",{name:"image",type:"text",placeholder:"Image",ref:this.imageRef,required:!0}),Object(j.jsx)("button",{type:"submit",children:"+ Add Fish "})]})}}]),a}(s.a.Component),M=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.fish,a=e.onEditFormChange,n=e.fishId,s=e.deleteFish;return Object(j.jsxs)("div",{className:"fish-edit",children:[Object(j.jsx)("input",{type:"text",name:"name",value:t.name,onChange:function(e){return a(n,e)}}),Object(j.jsx)("input",{type:"number",name:"price",value:t.price,onChange:function(e){return a(n,e)}}),Object(j.jsxs)("select",{type:"text",name:"isAvailable",value:t.isAvailable?"available":"unavailable",onChange:function(e){return a(n,e)},children:[Object(j.jsx)("option",{value:"available",children:"Fresh!"}),Object(j.jsx)("option",{value:"unavailable",children:"Sold Out!"})]}),Object(j.jsx)("textarea",{type:"text",name:"desc",value:t.desc,onChange:function(e){return a(n,e)}}),Object(j.jsx)("input",{type:"text",name:"image",value:t.image,onChange:function(e){return a(n,e)}}),Object(j.jsx)("button",{onClick:function(){return s(n)},children:"Remove fish"})]})}}]),a}(s.a.Component),I=function(e){return Object(j.jsxs)("nav",{className:"login",children:[Object(j.jsx)("h2",{children:"Inventory Login"}),Object(j.jsx)("p",{children:"Sign in to manage your store's inventory"}),Object(j.jsx)("button",{className:"github",onClick:function(){e.authenticate("Github")},children:"Log in with Github"}),Object(j.jsx)("button",{className:"facebook",onClick:function(){e.authenticate("Facebook")},children:"Log in with Facebook"})]})},T=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).authHandler=function(){var e=Object(k.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.fetch(n.props.storeId,{context:Object(S.a)(n)});case 2:if((a=e.sent).owner){e.next=6;break}return e.next=6,N.post("".concat(n.props.storeId,"/owner"),{data:t.user.uid});case 6:n.setState({uid:t.user.uid,owner:a.owner||t.user.uid});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.authenticate=function(e){var t=new(w.a.auth["".concat(e,"AuthProvider")]);C.auth().signInWithPopup(t).then(n.authHandler)},n.logOut=Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("logOut"),e.next=3,w.a.auth().signOut();case 3:n.setState({uid:null});case 4:case"end":return e.stop()}}),e)}))),n.state={uid:null,owner:null},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;w.a.auth().onAuthStateChanged((function(t){t&&e.authHandler({user:t})}))}},{key:"render",value:function(){var e=this.props,t=e.fishMenu,a=e.addFish,n=e.loadSampleFishes,s=e.onEditFormChange,r=e.deleteFish,i=Object(j.jsx)("button",{onClick:this.logOut,children:"Log out!"});return this.state.uid?this.state.uid!==this.state.owner?Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{children:"Sorry, you are not the owner!"}),i]}):Object(j.jsxs)("div",{className:"inventory",children:[Object(j.jsx)("h2",{children:"Inventory"}),i,Object.keys(t).map((function(e){return Object(j.jsx)(M,{fishId:e,fish:t[e],onEditFormChange:s,deleteFish:r},e)})),Object(j.jsx)(R,{addFish:a}),Object(j.jsx)("button",{onClick:n,children:"Load Sample Fishes"})]}):Object(j.jsx)(I,{authenticate:this.authenticate})}}]),a}(s.a.Component),D=T,L={fish1:{name:"Pacific Halibut",image:"/images/hali.jpg",desc:"Everyone\u2019s favorite white fish. We will cut it to the size you need and ship it.",price:1724,isAvailable:!0},fish2:{name:"Lobster",image:"/images/lobster.jpg",desc:"These tender, mouth-watering beauties are a fantastic hit at any dinner party.",price:3200,isAvailable:!0},fish3:{name:"Sea Scallops",image:"/images/scallops.jpg",desc:"Big, sweet and tender. True dry-pack scallops from the icey waters of Alaska. About 8-10 per pound",price:1684,isAvailable:!1},fish4:{name:"Mahi Mahi",image:"/images/mahi.jpg",desc:"Lean flesh with a mild, sweet flavor profile, moderately firm texture and large, moist flakes. ",price:1129,isAvailable:!0},fish5:{name:"King Crab",image:"/images/crab.jpg",desc:"Crack these open and enjoy them plain or with one of our cocktail sauces",price:4234,isAvailable:!0},fish6:{name:"Atlantic Salmon",image:"/images/salmon.jpg",desc:"This flaky, oily salmon is truly the king of the sea. Bake it, grill it, broil it...as good as it gets!",price:1453,isAvailable:!0},fish7:{name:"Oysters",image:"/images/oysters.jpg",desc:"A soft plump oyster with a sweet salty flavor and a clean finish.",price:2543,isAvailable:!0},fish8:{name:"Mussels",image:"/images/mussels.jpg",desc:"The best mussels from the Pacific Northwest with a full-flavored and complex taste.",price:425,isAvailable:!0},fish9:{name:"Jumbo Prawns",image:"/images/prawns.jpg",desc:"With 21-25 two bite prawns in each pound, these sweet morsels are perfect for shish-kabobs.",price:2250,isAvailable:!0}},q=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleClick=function(){n.props.addToOrder(n.props.index)},n.state={},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.details,a=t.image,n=t.name,s=t.price,r=t.desc,i=t.isAvailable;return Object(j.jsxs)("li",{className:"menu-fish",children:[Object(j.jsx)("img",{src:a,alt:n}),Object(j.jsxs)("h3",{className:"fish-name",children:[n,Object(j.jsx)("span",{className:"price",children:f(s)})]}),Object(j.jsx)("p",{children:r}),Object(j.jsx)("button",{disabled:!i,onClick:function(){return e.props.addToOrder(e.props.index)},children:i?"Add to order":"SOLD OUT!"})]})}}]),a}(s.a.Component),E=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={fishMenu:{},order:{}},e.loadSampleFishes=function(){e.setState({fishMenu:L})},e.addFish=function(t){var a=Object(o.a)({},e.state.fishMenu);a["fish".concat(Date.now())]=t,e.setState({fishMenu:a})},e.addToOrder=function(t){var a=Object(o.a)({},e.state.order);a[t]=a[t]+1||1,e.setState({order:a})},e.onEditFormChange=function(t,a){var n=a.currentTarget,s=n.value,r=n.name,i=Object(o.a)({},e.state.fishMenu);i[t][r]="isAvailable"===r?"available"===s:s,e.setState({fishMenu:i})},e.deleteFish=function(t){var a=Object(o.a)({},e.state.fishMenu);a[t]=null,e.setState({fishMenu:a})},e.deleteOrderFish=function(t){var a=Object(o.a)({},e.state.order);delete a[t],e.setState({order:a})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=localStorage.getItem("".concat(e.storeId,"-order"));t&&this.setState({order:JSON.parse(t)}),this.ref=N.syncState("".concat(e.storeId,"/fishMenu"),{context:this,state:"fishMenu"})}},{key:"componentDidUpdate",value:function(){var e=this.props.match.params;localStorage.setItem("".concat(e.storeId,"-order"),JSON.stringify(this.state.order))}},{key:"componentWillUnmount",value:function(){N.removeBinding(this.ref)}},{key:"render",value:function(){var e=this,t=this.state,a=t.fishMenu,n=t.order;return Object(j.jsxs)("div",{className:"catch-of-the-day",children:[Object(j.jsxs)("div",{className:"menu",children:[Object(j.jsx)(b,{tagline:"Fresh Seafood Market"}),Object(j.jsx)("ul",{className:"fishes",children:Object.keys(a).map((function(t){return Object(j.jsx)(q,{details:a[t],index:t,addToOrder:e.addToOrder},t)}))})]}),Object(j.jsx)(g,{fishMenu:a,order:n,deleteOrderFish:this.deleteOrderFish}),Object(j.jsx)(D,{addFish:this.addFish,loadSampleFishes:this.loadSampleFishes,fishMenu:a,onEditFormChange:this.onEditFormChange,deleteFish:this.deleteFish,storeId:this.props.match.params.storeId})]})}}]),a}(s.a.Component),P=E,U=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(u.a)(a,[{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsx)("h2",{children:"Not Found!!"})})}}]),a}(s.a.Component),z=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).goToStore=function(t){t.preventDefault();var a=e.inputRef.current.value;e.props.history.push("/store/".concat(a))},e.inputRef=s.a.createRef(),e}return Object(u.a)(a,[{key:"render",value:function(){return Object(j.jsxs)("form",{className:"store-selector",onSubmit:this.goToStore,children:[Object(j.jsx)("h1",{className:"store-selector__header",children:"Select A Store"}),Object(j.jsx)("input",{type:"text",ref:this.inputRef,defaultValue:m(),required:!0}),Object(j.jsx)("button",{type:"submit",children:"Let's go \u27a1"})]})}}]),a}(s.a.Component),H=function(){return Object(j.jsx)(i.a,{children:Object(j.jsxs)(c.c,{children:[Object(j.jsx)(c.a,{exact:!0,path:"/",component:z}),Object(j.jsx)(c.a,{path:"/store/:storeId",component:P}),Object(j.jsx)(c.a,{component:U})]})})};a(55);Object(r.render)(Object(j.jsx)(H,{}),document.querySelector("#main"))}},[[56,1,2]]]);
//# sourceMappingURL=main.9030fcbb.chunk.js.map